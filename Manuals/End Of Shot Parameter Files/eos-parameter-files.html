<html>
<head>
<title>True-Trak 2020&trade; End of Shot Parameter Files</title>
<style type="text/css">
td { padding-left: 10; padding-right: 10  }
em { font-style: normal; font-weight: bolder; }
</style>
</head>
<body>
<h1>True-Trak 2020&trade; End of Shot Parameter Files</h1>

<p>It is possible to write the parameter values to a file at the end of
each shot. This is set up using entries in the
<b>\V5\EXES\MONALL.INI</b> file. All entries are in the <b>[Config]</b> section of that file.</p>

<h2>End of Shot Output File</h2>

<p>There are two types of files that can be written to. For the first type of file, the End of Shot Output File,
the program writes one line after each shot. If the file exists already then the new line is appended 
at the end of the file.</p>

<h4>Path Name of the File</h4>
<p>The name of the file is specified using the following line.</p>
<pre>EosOutputFile=C:\V5\Exes\parameters.csv</pre>
<p>This will write the lines of output to the <b>C:\V5\Exes\parameters.csv</b> file.</p>
<p>You can embed dynamic strings into the filename using tags. The following</p>
<pre>EosOutputFile=C:\Parameter-Files\{m}-{p}-parameters.csv</pre>
<p>will produce a file name of <b>C:\Parameter-Files\1250Ton-VE01224HEADER-parameters.csv</b> for machine 1250Ton and part
VE01224HEADER.</p>
<p>See the details at <a href="#dynamic_file_name">Dynamic File Names</a></p>

<h4>Delimiters</h4>
Each field in the output is separated by a character. The
default character is a comma. You can change this. Three examples
are shown below. The second sets the delimiter to a tab character. The last example, a
backslash followed by a zero, tells the program to <em>use no delimiter between fields</em>.
<pre>
EosComDelimitChar=;
EosComDelimitChar=\t
EosComDelimitChar=\0
</pre>

<h4>Misc</h4>
<p>The parameter values can be written with a fixed character width. Normally this is set to 
"None" as shown here.</p>
<pre>
EosFixedWidth=None
</pre>

<p>The following lines override the default good shot indicators: "A", "W", "G".</p>
<pre>
EosHaveAlarmShot=Alarm      Prints the word "Alarm" if at least one parameters is in alarm
EosHaveWarningShot=Warning  Prints the word "Warning" if there are no alarms but at least one parameter is in warning
EosHaveGoodShot=Good        Prints the word "Good" if there are no Warnings and no Alarms
</pre>

<p>Set the end of line to be a carriage return and line feed with the following line.</p>
<pre>
EosComEol=\r\n
</pre>

<h4>Output File Setup Line</h4>
<p>The message that is output is controlled by the setup line. The setup line
  contains a list, in order, of the outputs desired.
</p>
<p>
Each outout is separated by a comma (except for the last). The
outputs are:
<p>
<center>

<table border width="75%" bgcolor=floralwhite>
<tr><td colspan="2" bgcolor=moccasin align=center>Tags for Serial Output</td></tr>
<tr><td>Axx</td>   <td>Alarm state indicator (alarm, warning, good) of parameter xx [0-119] e.g. A5,A24,</td></tr>
<tr><td>D</td>     <td>Date mm/dd/yyyy</td></tr>
<tr><td>D0</td>    <td>Date mmddyy</td></tr>
<tr><td>G</td>     <td>Prints an indicator for alarm, warning, or good shot</td></tr>
<tr><td>J</td>     <td>Julian Date, Jan 1 = 1,   Dec 31 = 365.</td></tr>
<tr><td>J3</td>    <td>Julian Date, Jan 1 = 001, Dec 31 = 365.</td></tr>
<tr><td>L</td>     <td>Inserts a Line Feed (only works with ',' delimiter)</td></tr>
<tr><td>M</td>     <td>Machine Name</td></tr>
<tr><td>P</td>     <td>Part Name</td></tr>
<tr><td>PD</td>    <td>Plunger Diameter with optional length. Follow with a length, e.g. PD10, for fixed length.</td></tr>
<tr><td>Q</td>     <td>Insert text, use \1 for control character. "QV015," inserts "V015" into the line.</td></tr>
<tr><td>R</td>     <td>Inserts a Carriage Return (only works with ',' delimiter)</td></tr>
<tr><td>S6</td>    <td>Shot Number with optional length. No length, "S", means variable length (Shot 32 would be "32"), specified length, "S6", means left pad with zeros (Shot 32 would be "000032").</td></tr>
<tr><td>T</td>     <td>Time hh:mm:ss</td></tr>
<tr><td>T0</td>    <td>Time hhmmss</td></tr>
<tr><td>T1</td>    <td>Time hhmm</td></tr>
<tr><td>Y</td>     <td>Last Digit of the current year. 2009 = 9, 2010 = 0, etc.</td></tr>
<tr><td>Y2</td>    <td>Last 2 Digits of the current year. 2009 = 09</td></tr>
<tr><td>0</td>     <td>Parameter 1</td></tr>
<tr><td>1</td>     <td>Parameter 2</td></tr>
<tr><td>2</td>     <td>Parameter 3</td></tr>
<tr><td>&nbsp;</td><td>...</td></tr>
</table>
</center>

<p>For example, the following line
<pre>
EosOutputFileSetup=M,P,S6,D,T,1,2,3,4
</pre>

results in the following output (assuming ',' delemiter and no eol).</p>

<pre>
M01,VISITRAK,000032,02/27/1998,12:34:53,28.9112,626.432,574.342,51.8590
</pre>

<p>If you only wanted the shot number you would use the following line.

<pre>
EosOutputFileSetup=S
</pre>

This would give the following output for shot number 32

<pre>
32
</pre>
</p>

<pre>
EosOutputFileSetup=S6
</pre>

This would give the following output

<pre>
000032
</pre>

The parameters are shown below.
<p>
<center>
<table border bgcolor=floralwhite>

<tr><td align=center colspan="4" bgcolor=moccasin>Visi-Trak Parameters</td></tr>
<tr><td align="right">0</td><td>Fill Time</td>                    <td>18</td><td>Sleeve Full Velocity</td></tr>
<tr><td align="right">1</td><td>Total Shot Time</td>              <td>19</td><td>Runner Full Velocity</td></tr>
<tr><td align="right">2</td><td>Slow Shot Time</td>               <td>20</td><td>Average Fill Velocity</td></tr>
<tr><td align="right">3</td><td>Fast Shot</td>                    <td>21</td><td>User Velocity Pos One</td></tr>
<tr><td align="right">4</td><td>Fast Shot Rise Time</td>          <td>22</td><td>User Velocity Pos Two</td></tr>
<tr><td align="right">5</td><td>Cycle Time</td>                   <td>23</td><td>User Velocity Pos Three</td></tr>
<tr><td align="right">6</td><td>User Time Int One</td>            <td>24</td><td>User Velocity Pos Four</td></tr>
<tr><td align="right">7</td><td>User Time Int Two</td>            <td>25</td><td>User Avg Vel Range One</td></tr>
<tr><td align="right">8</td><td>User Time Int Three</td>          <td>26</td><td>User Avg Vel Range Two</td></tr>
<tr><td align="right">9</td><td>User Time Int Four</td>           <td>27</td><td>User Avg Vel Range Three</td></tr>
<tr><td align="right">10</td><td>User Time Int Five</td>          <td>28</td><td>User Avg Vel Range Four</td></tr>
<tr><td align="right">11</td><td>Biscuit Size</td>                <td>29</td>     <td>Position P1</td></tr>
<tr><td align="right">12</td><td>Calc Start Fast Shot</td>        <td>30</td><td>Position P2</td></tr>
<tr><td align="right">13</td><td>Intensification Pressure</td>    <td>31</td><td>Position P3</td></tr>
<tr><td align="right">14</td><td>Intensification Rise Time</td>   <td>32</td><td>Avg Slow Shot Velocity</td></tr>
<tr><td align="right">15</td><td>Eff Peak Intensification</td>    <td>33</td><td>Avg Fast Show Velocity</td></tr>
<tr><td align="right">16</td><td>Impact Pressure to Peak</td>     <td>34</td><td>Fast Shot Distance</td></tr>
<tr><td align="right">17</td><td>Intens Squeeze Distance</td>     <td>&nbsp;</td><td>&nbsp;</td></tr>
</table>
</center>
<p>

<h2>Shot and Parameter Alarm and Warning Indicators</h2>

<h3>Shot Goodness</h3>
<p>The 'G' output tag tells the program to write an 'A', 'W', or 'G' to indicate the alarm state of the shot.</p>

'A' indicates that at least one parameter had a value outside of the alarm limits.<br>
'W' indicates that there were no parameters in alarm but at least one had a value outside the warning limits.<br>
'G' indicates that all parameters were within the alarm and warning limits.

<p>The symbols, 'A', 'W', and 'G' can be set to any string that you wish. This is done by editing the
C:\V5\EXES\MONALL.INI file and changing the following lines (enter them in the [Config] section if they don't
exist). In the examples below the single character symbols have been changed to words.</p>

<ul>
<li>EosHaveAlarmShot=Alarm</li>
<li>EosHaveGoodShot=Good</li>
<li>EosHaveWarningShot=Warning</li>
</ul>

<h3>Individual Parameter Goodness</h3>
<p>The 'A' output tag tells the program to write an 'A', 'W', or 'G' to indicate the alarm state of a
single parameter.</p>

<p>"A11", for example, tells the program to write the alarm state of the Biscuit Size parameter. "A12" would do
the same for the Calculated Start of Fast Shot parameter.</p>

<p>As with the shot indicators, the symbols used for the parameter indicators can be set in the [Config]
section of the C:\V5\EXES\MONALL.INI file. The following examples illustrate this.</p>
<ul>
<li>EosHaveAlarmParameter=Alarm</li>
<li>EosHaveGoodParameter=Good</li>
<li>EosHaveWarningParameter=Warning</li>
</ul>

<h2>End of Shot Parameter File</h2>
<p>The second type of file you can create is the End of Shot Parameter File. This file differs from the End of Shot Output File 
in the following ways.</p>
<ol>
<li>One file is created after each shot. Once the file has been created it is the responsibility of the customer to process and delete the file.</li>
<li>The name of the file is the shot name with a ".csv" extension.</li>
<li>The directory into which the file will be created can be specified as a <a href="#dynamic_file_name">dynamic file name</a> but the name of the file
itself cannot be changed.</li>
<li>The file contains one line per parameter. Each line can include the parameter number, parameter name, measured value,
and units.</li>
<li>The first line of the file can, optionally, contain the part name, shot name, shot date, and shot time</li>
</ol>

<h4>Destination Directory</h4>
<p>The destination directory is specified as follows
<pre>EosParamFileDir=c:\v7\shot-parameter-files</pre></p>
<p>This is the name of the directory only. It is a dynamic name so you can imbed the same tags as you can with
<a href="#dynamic_file_name">dynamic file names</a> but you can only change the directory and not the name of the file itself.</p>

<h4>Optional Information Line</h4>
<p>You can, optionally, write an information line at the beginning of the file. You specify this line as follows.
<pre>EosParamFileInfoSetup={part name},{shot name},{shot date},{shot time}</pre></p>
<p>If this line is missing no informational line will be written at the beginning of the file.</p>
<p>
<center>
<table border width="75%" bgcolor=floralwhite>
<tr><td colspan="3" bgcolor=moccasin align=center>Tags for EOS Parameter File Information Line</td></tr>
<tr><td>{part name}</td><td>Part Name</td><td>Header Assembly</td></tr>
<tr><td>{shot name}</td><td>Shot Name</td><td>1250Ton-Header Assembly0003435</td></tr>
<tr><td>{shot date}</td><td>Shot Date</td><td>03/27/2014</td></tr>
<tr><td>{shot time}</td><td>Shot Time</td><td>16:37:50</td></tr>
</table></center></p>

<h4>Parameter Line Setup</h4>
<p>The setup for the parameter lines is as follows.
<pre>EosParamFileSetup={param number},{param name},{param value},{param units}</pre></p>
<p>If this line is missing no file will be written.</p>
<p>
<center>
<table border width="75%" bgcolor=floralwhite>
<tr><td colspan="3" bgcolor=moccasin align=center>Tags for EOS Parameter File Parameter Lines</td></tr>
<tr><td>{param number}</td><td>Parameter Number</td><td>1,2,...,64</td></tr>
<tr><td>{param name}</td><td>Parameter Name</td><td>Slow Shot Velocity</td></tr>
<tr><td>{param value}</td><td>Parameter Value</td><td>36.3483</td></tr>
<tr><td>{param units}</td><td>Parameter Units</td><td>IN, IPS, etc.</td></tr>
<tr><td>{param high alarm}</td><td>High Alarm Level</td><td>Value</td></tr>
<tr><td>{param low alarm}</td><td>Low Alarm Level</td><td>Value</td></tr>
<tr><td>{param high warning}</td><td>High Warning Level</td><td>Value</td></tr>
<tr><td>{param low warning}</td><td>Low Warning Level</td><td>Value</td></tr>
<tr><td>{param goodness}</td><td>Alarm State</td><td>A if in Alarm, W if Warning, G if Good</td></tr>
</table></center></p>

<h4 id="dynamic_file_name">Dynamic File Names</h4>
<p>Tags can be inserted into the file name. These tags, shown below, will be replaced by the values they represent. The tags can be inserted into the file name itself or into the directory names.</p>
<p>For example,
<pre>"C:\parameters\{yyyy}\{mm}\parameters-{dd}.csv"</pre>
would create a "parameters-07.csv file in the C:\parameters\2014\03 directory.</p>

<center>
<table border bgcolor=floralwhite>

<tr><td align=center colspan="2" bgcolor=moccasin>Dynamic File Name Tags</td></tr>
<tr><td>{dd}</td>   <td>Day of the month, e.g. 05</td></tr>
<tr><td>{mmm}</td>  <td>Month, e.g. JAN</td></tr>
<tr><td>{mm}</td>   <td>Month, e.g. 01</td></tr>
<tr><td>{hh}</td>   <td>Hour, e.g. 01, 02, ... 23</td></tr>
<tr><td>{mi}</td>   <td>Minutes, e.g. 30</td></tr>
<tr><td>{m}</td>    <td>Machine, e.g. 1250Ton</td></tr>
<tr><td>{p}</td>    <td>Part Name, e.g. Header Assembly</td></tr>
<tr><td>{yyyy}</td> <td>Year, e.g. 2014</td></tr>
<tr><td>{yy}</td>   <td>Year, e.g. 14</td></tr>
<tr><td>{s}</td>    <td>Shift Number, e.g. 1</td></tr>
</table>
</center>
</p>
</body>
</html>

